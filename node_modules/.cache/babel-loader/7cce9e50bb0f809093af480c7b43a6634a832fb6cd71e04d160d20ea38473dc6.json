{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { auth } from './firebase';\nimport { signOut } from 'firebase/auth';\nimport UploadCarton from './components/UploadCarton.vue';\nimport AssignCartons from './components/AssignCartons.vue';\nimport CartonList from './components/CartonList.vue';\nimport SellerList from './components/SellerList.vue';\nimport { db } from './firebase';\nimport { collection, query, where, getDocs, addDoc } from 'firebase/firestore';\nexport default {\n  components: {\n    UploadCarton,\n    AssignCartons,\n    CartonList,\n    SellerList\n  },\n  methods: {\n    async logout() {\n      try {\n        await signOut(auth);\n        this.$router.push('/login');\n        console.log('Sesión cerrada con éxito');\n      } catch (error) {\n        console.error('Error al cerrar sesión:', error);\n      }\n    },\n    async checkDuplicates({\n      serials,\n      files\n    }, callback) {\n      try {\n        const cartonesRef = collection(db, 'cartones');\n        const q = query(cartonesRef, where('serial', 'in', serials));\n        const querySnapshot = await getDocs(q);\n        const existingSerials = querySnapshot.docs.map(doc => doc.data().serial);\n        const nonDuplicates = files.filter(file => !existingSerials.includes(file.name.split('.')[0]));\n        callback(nonDuplicates);\n      } catch (error) {\n        console.error('Error al verificar duplicados:', error);\n        alert('Error al verificar duplicados: ' + error.message);\n        callback([]);\n      }\n    },\n    async handleImagesUploaded(images) {\n      try {\n        for (const image of images) {\n          const docRef = await addDoc(collection(db, 'cartones'), {\n            serial: image.serial,\n            imageUrl: image.imageUrl,\n            estado: 'disponible',\n            createdAt: new Date(),\n            vendedorId: null\n          });\n          console.log(`Cartón ${image.serial} guardado con ID:`, docRef.id);\n        }\n        alert('Todos los cartones se guardaron exitosamente en Firestore');\n      } catch (error) {\n        console.error('Error al guardar los cartones:', error);\n        alert('Error al guardar en Firestore: ' + error.message);\n      }\n    }\n  }\n};","map":{"version":3,"names":["auth","signOut","UploadCarton","AssignCartons","CartonList","SellerList","db","collection","query","where","getDocs","addDoc","components","methods","logout","$router","push","console","log","error","checkDuplicates","serials","files","callback","cartonesRef","q","querySnapshot","existingSerials","docs","map","doc","data","serial","nonDuplicates","filter","file","includes","name","split","alert","message","handleImagesUploaded","images","image","docRef","imageUrl","estado","createdAt","Date","vendedorId","id"],"sources":["D:\\Lotweb\\venta-cartones\\src\\App.vue"],"sourcesContent":["```vue\n<template>\n  <div id=\"app\" class=\"min-h-screen bg-gray-100\">\n    <header v-if=\"$route.path !== '/login'\" class=\"bg-blue-600 text-white p-4 shadow-md\">\n      <div class=\"container mx-auto flex justify-between items-center\">\n        <h1 class=\"text-3xl font-bold\">Venta de Cartones</h1>\n        <button\n          @click=\"logout\"\n          class=\"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition\"\n        >\n          Cerrar Sesión\n        </button>\n      </div>\n    </header>\n    <main class=\"container mx-auto p-4\">\n      <router-view />\n    </main>\n  </div>\n</template>\n\n<script>\nimport { auth } from './firebase';\nimport { signOut } from 'firebase/auth';\nimport UploadCarton from './components/UploadCarton.vue';\nimport AssignCartons from './components/AssignCartons.vue';\nimport CartonList from './components/CartonList.vue';\nimport SellerList from './components/SellerList.vue';\nimport { db } from './firebase';\nimport { collection, query, where, getDocs, addDoc } from 'firebase/firestore';\n\nexport default {\n  components: {\n    UploadCarton,\n    AssignCartons,\n    CartonList,\n    SellerList\n  },\n  methods: {\n    async logout() {\n      try {\n        await signOut(auth);\n        this.$router.push('/login');\n        console.log('Sesión cerrada con éxito');\n      } catch (error) {\n        console.error('Error al cerrar sesión:', error);\n      }\n    },\n    async checkDuplicates({ serials, files }, callback) {\n      try {\n        const cartonesRef = collection(db, 'cartones');\n        const q = query(cartonesRef, where('serial', 'in', serials));\n        const querySnapshot = await getDocs(q);\n        const existingSerials = querySnapshot.docs.map(doc => doc.data().serial);\n        const nonDuplicates = files.filter(file => !existingSerials.includes(file.name.split('.')[0]));\n        callback(nonDuplicates);\n      } catch (error) {\n        console.error('Error al verificar duplicados:', error);\n        alert('Error al verificar duplicados: ' + error.message);\n        callback([]);\n      }\n    },\n    async handleImagesUploaded(images) {\n      try {\n        for (const image of images) {\n          const docRef = await addDoc(collection(db, 'cartones'), {\n            serial: image.serial,\n            imageUrl: image.imageUrl,\n            estado: 'disponible',\n            createdAt: new Date(),\n            vendedorId: null\n          });\n          console.log(`Cartón ${image.serial} guardado con ID:`, docRef.id);\n        }\n        alert('Todos los cartones se guardaron exitosamente en Firestore');\n      } catch (error) {\n        console.error('Error al guardar los cartones:', error);\n        alert('Error al guardar en Firestore: ' + error.message);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* Tailwind maneja los estilos */\n</style>"],"mappings":";;;;AAqBA,SAASA,IAAG,QAAS,YAAY;AACjC,SAASC,OAAM,QAAS,eAAe;AACvC,OAAOC,YAAW,MAAO,+BAA+B;AACxD,OAAOC,aAAY,MAAO,gCAAgC;AAC1D,OAAOC,UAAS,MAAO,6BAA6B;AACpD,OAAOC,UAAS,MAAO,6BAA6B;AACpD,SAASC,EAAC,QAAS,YAAY;AAC/B,SAASC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAK,QAAS,oBAAoB;AAE9E,eAAe;EACbC,UAAU,EAAE;IACVV,YAAY;IACZC,aAAa;IACbC,UAAU;IACVC;EACF,CAAC;EACDQ,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb,IAAI;QACF,MAAMb,OAAO,CAACD,IAAI,CAAC;QACnB,IAAI,CAACe,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;QAC3BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;MACzC,EAAE,OAAOC,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD;IACF,CAAC;IACD,MAAMC,eAAeA,CAAC;MAAEC,OAAO;MAAEC;IAAM,CAAC,EAAEC,QAAQ,EAAE;MAClD,IAAI;QACF,MAAMC,WAAU,GAAIjB,UAAU,CAACD,EAAE,EAAE,UAAU,CAAC;QAC9C,MAAMmB,CAAA,GAAIjB,KAAK,CAACgB,WAAW,EAAEf,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAEY,OAAO,CAAC,CAAC;QAC5D,MAAMK,aAAY,GAAI,MAAMhB,OAAO,CAACe,CAAC,CAAC;QACtC,MAAME,eAAc,GAAID,aAAa,CAACE,IAAI,CAACC,GAAG,CAACC,GAAE,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,CAAC;QACxE,MAAMC,aAAY,GAAIX,KAAK,CAACY,MAAM,CAACC,IAAG,IAAK,CAACR,eAAe,CAACS,QAAQ,CAACD,IAAI,CAACE,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9Ff,QAAQ,CAACU,aAAa,CAAC;MACzB,EAAE,OAAOd,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QACtDoB,KAAK,CAAC,iCAAgC,GAAIpB,KAAK,CAACqB,OAAO,CAAC;QACxDjB,QAAQ,CAAC,EAAE,CAAC;MACd;IACF,CAAC;IACD,MAAMkB,oBAAoBA,CAACC,MAAM,EAAE;MACjC,IAAI;QACF,KAAK,MAAMC,KAAI,IAAKD,MAAM,EAAE;UAC1B,MAAME,MAAK,GAAI,MAAMjC,MAAM,CAACJ,UAAU,CAACD,EAAE,EAAE,UAAU,CAAC,EAAE;YACtD0B,MAAM,EAAEW,KAAK,CAACX,MAAM;YACpBa,QAAQ,EAAEF,KAAK,CAACE,QAAQ;YACxBC,MAAM,EAAE,YAAY;YACpBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC;YACrBC,UAAU,EAAE;UACd,CAAC,CAAC;UACFhC,OAAO,CAACC,GAAG,CAAC,UAAUyB,KAAK,CAACX,MAAM,mBAAmB,EAAEY,MAAM,CAACM,EAAE,CAAC;QACnE;QACAX,KAAK,CAAC,2DAA2D,CAAC;MACpE,EAAE,OAAOpB,KAAK,EAAE;QACdF,OAAO,CAACE,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QACtDoB,KAAK,CAAC,iCAAgC,GAAIpB,KAAK,CAACqB,OAAO,CAAC;MAC1D;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}