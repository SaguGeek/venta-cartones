{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"space-y-4\"\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  class: \"flex space-x-4 mt-1\"\n};\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"hidden sm:grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4\"\n};\nconst _hoisted_7 = {\n  class: \"text-center text-gray-800 font-medium\"\n};\nconst _hoisted_8 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Selección de Vendedor \"), _createElementVNode(\"div\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"seller\",\n    class: \"block text-sm font-medium text-gray-700\"\n  }, \"Seleccionar Vendedor\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    id: \"seller\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.selectedSeller = $event),\n    class: \"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300\"\n  }, [_cache[4] || (_cache[4] = _createElementVNode(\"option\", {\n    value: \"\",\n    disabled: \"\"\n  }, \"Elige un vendedor\", -1 /* HOISTED */)), _cache[5] || (_cache[5] = _createElementVNode(\"option\", {\n    value: \"all\"\n  }, \"Todos\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.sellers, seller => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: seller.id,\n      value: seller.id\n    }, _toDisplayString(seller.name), 9 /* TEXT, PROPS */, _hoisted_2);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedSeller]])]), _createCommentVNode(\" Rango de Cartones Disponibles \"), _createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700\"\n  }, \"Rango de Cartones Disponibles\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.rangeStart = $event),\n    class: \"w-1/2 px-4 py-2 border border-gray-300 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300\"\n  }, [_cache[7] || (_cache[7] = _createElementVNode(\"option\", {\n    value: \"\",\n    disabled: \"\"\n  }, \"Desde\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.availableSerials, serial => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: serial,\n      value: serial\n    }, _toDisplayString(serial), 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.rangeStart]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.rangeEnd = $event),\n    class: \"w-1/2 px-4 py-2 border border-gray-300 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300\"\n  }, [_cache[8] || (_cache[8] = _createElementVNode(\"option\", {\n    value: \"\",\n    disabled: \"\"\n  }, \"Hasta\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.availableSerials, serial => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: serial,\n      value: serial\n    }, _toDisplayString(serial), 9 /* TEXT, PROPS */, _hoisted_5);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.rangeEnd]])])]), _createCommentVNode(\" Miniaturas de Cartones en Pantallas Pequeñas \"), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.availableSerials, serial => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: serial,\n      class: \"bg-white p-2 rounded-lg shadow-md hover:shadow-lg transition duration-300\"\n    }, [_createElementVNode(\"div\", _hoisted_7, _toDisplayString(serial), 1 /* TEXT */), _cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n      class: \"h-24 bg-gray-200 rounded flex items-center justify-center text-gray-500\"\n    }, \"Imagen Placeholder\", -1 /* HOISTED */))]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Botón de Asignar \"), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.assignCartons && $options.assignCartons(...args)),\n    disabled: !$data.selectedSeller || !$data.rangeStart || !$data.rangeEnd || $data.rangeStart > $data.rangeEnd,\n    class: \"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition duration-300\"\n  }, \" Asignar Cartones \", 8 /* PROPS */, _hoisted_8)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","for","id","_cache","$event","$data","selectedSeller","value","disabled","_Fragment","_renderList","sellers","seller","key","name","_hoisted_2","_hoisted_3","rangeStart","availableSerials","serial","_hoisted_4","rangeEnd","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","onClick","args","$options","assignCartons","_hoisted_8"],"sources":["D:\\Lotweb\\venta-cartones\\src\\components\\AssignCartons.vue"],"sourcesContent":["```vue\r\n<template>\r\n  <div class=\"space-y-4\">\r\n    <!-- Selección de Vendedor -->\r\n    <div>\r\n      <label for=\"seller\" class=\"block text-sm font-medium text-gray-700\">Seleccionar Vendedor</label>\r\n      <select\r\n        id=\"seller\"\r\n        v-model=\"selectedSeller\"\r\n        class=\"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300\"\r\n      >\r\n        <option value=\"\" disabled>Elige un vendedor</option>\r\n        <option value=\"all\">Todos</option>\r\n        <option v-for=\"seller in sellers\" :key=\"seller.id\" :value=\"seller.id\">{{ seller.name }}</option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Rango de Cartones Disponibles -->\r\n    <div>\r\n      <label class=\"block text-sm font-medium text-gray-700\">Rango de Cartones Disponibles</label>\r\n      <div class=\"flex space-x-4 mt-1\">\r\n        <select\r\n          v-model=\"rangeStart\"\r\n          class=\"w-1/2 px-4 py-2 border border-gray-300 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300\"\r\n        >\r\n          <option value=\"\" disabled>Desde</option>\r\n          <option v-for=\"serial in availableSerials\" :key=\"serial\" :value=\"serial\">{{ serial }}</option>\r\n        </select>\r\n        <select\r\n          v-model=\"rangeEnd\"\r\n          class=\"w-1/2 px-4 py-2 border border-gray-300 rounded-lg shadow-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-300\"\r\n        >\r\n          <option value=\"\" disabled>Hasta</option>\r\n          <option v-for=\"serial in availableSerials\" :key=\"serial\" :value=\"serial\">{{ serial }}</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Miniaturas de Cartones en Pantallas Pequeñas -->\r\n    <div class=\"hidden sm:grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4\">\r\n      <div v-for=\"serial in availableSerials\" :key=\"serial\" class=\"bg-white p-2 rounded-lg shadow-md hover:shadow-lg transition duration-300\">\r\n        <div class=\"text-center text-gray-800 font-medium\">{{ serial }}</div>\r\n        <div class=\"h-24 bg-gray-200 rounded flex items-center justify-center text-gray-500\">Imagen Placeholder</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Botón de Asignar -->\r\n    <button\r\n      @click=\"assignCartons\"\r\n      :disabled=\"!selectedSeller || !rangeStart || !rangeEnd || rangeStart > rangeEnd\"\r\n      class=\"w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 transition duration-300\"\r\n    >\r\n      Asignar Cartones\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs } from 'firebase/firestore';\r\nimport { updateDoc, doc } from 'firebase/firestore';\r\n\r\nexport default {\r\n  name: 'AssignCartons',\r\n  props: {\r\n    cartonesAsignados: Function\r\n  },\r\n  data() {\r\n    return {\r\n      selectedSeller: '',\r\n      rangeStart: '',\r\n      rangeEnd: '',\r\n      sellers: [],\r\n      availableSerials: []\r\n    };\r\n  },\r\n  async created() {\r\n    await this.loadSellers();\r\n    await this.loadAvailableCartons();\r\n  },\r\n  methods: {\r\n    async loadSellers() {\r\n      // Simulación de carga de vendedores desde Firestore (ajusta según tu estructura)\r\n      try {\r\n        const sellersRef = collection(db, 'vendedores');\r\n        const querySnapshot = await getDocs(sellersRef);\r\n        this.sellers = querySnapshot.docs.map(doc => ({ id: doc.id, name: doc.data().name || `Vendedor ${doc.id}` }));\r\n      } catch (error) {\r\n        console.error('Error al cargar vendedores:', error);\r\n      }\r\n    },\r\n    async loadAvailableCartons() {\r\n      try {\r\n        const cartonesRef = collection(db, 'cartones');\r\n        const q = query(cartonesRef, where('estado', '==', 'disponible'));\r\n        const querySnapshot = await getDocs(q);\r\n        this.availableSerials = querySnapshot.docs\r\n          .map(doc => doc.data().serial)\r\n          .sort((a, b) => a - b); // Ordenar seriales numéricamente\r\n      } catch (error) {\r\n        console.error('Error al cargar cartones disponibles:', error);\r\n      }\r\n    },\r\n    async assignCartons() {\r\n      try {\r\n        const cartonesRef = collection(db, 'cartones');\r\n        const q = query(cartonesRef, where('estado', '==', 'disponible'), where('serial', '>=', this.rangeStart), where('serial', '<=', this.rangeEnd));\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        const updatePromises = querySnapshot.docs.map(async (docSnapshot) => {\r\n          const cartonRef = doc(db, 'cartones', docSnapshot.id);\r\n          await updateDoc(cartonRef, {\r\n            estado: 'asignado',\r\n            vendedorId: this.selectedSeller === 'all' ? null : this.selectedSeller\r\n          });\r\n        });\r\n\r\n        await Promise.all(updatePromises);\r\n        this.$emit('cartones-asignados');\r\n        const action = this.selectedSeller === 'all' ? 'liberados' : 'asignados';\r\n        alert(`Cartones del ${this.rangeStart} al ${this.rangeEnd} ${action} exitosamente`);\r\n        this.rangeStart = '';\r\n        this.rangeEnd = '';\r\n      } catch (error) {\r\n        console.error('Error al asignar cartones:', error);\r\n        alert('Error al asignar cartones: ' + error.message);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Estilos para la galería en pantallas pequeñas */\r\n@media (max-width: 640px) {\r\n  .hidden {\r\n    display: grid;\r\n  }\r\n}\r\n</style>\r\n```"],"mappings":";;EAEOA,KAAK,EAAC;AAAW;mBAFxB;;EAoBWA,KAAK,EAAC;AAAqB;mBApBtC;mBAAA;;EAuCSA,KAAK,EAAC;AAAwE;;EAE1EA,KAAK,EAAC;AAAuC;mBAzC1D;;uBAEEC,mBAAA,CAoDM,OApDNC,UAoDM,GAnDJC,mBAAA,2BAA8B,EAC9BC,mBAAA,CAWM,c,0BAVJA,mBAAA,CAAgG;IAAzFC,GAAG,EAAC,QAAQ;IAACL,KAAK,EAAC;KAA0C,sBAAoB,sB,gBACxFI,mBAAA,CAQS;IAPPE,EAAE,EAAC,QAAQ;IAPnB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAQiBC,KAAA,CAAAC,cAAc,GAAAF,MAAA;IACvBR,KAAK,EAAC;gCAENI,mBAAA,CAAoD;IAA5CO,KAAK,EAAC,EAAE;IAACC,QAAQ,EAAR;KAAS,mBAAiB,sB,0BAC3CR,mBAAA,CAAkC;IAA1BO,KAAK,EAAC;EAAK,GAAC,OAAK,uB,kBACzBV,mBAAA,CAAgGY,SAAA,QAbxGC,WAAA,CAaiCL,KAAA,CAAAM,OAAO,EAAjBC,MAAM;yBAArBf,mBAAA,CAAgG;MAA7DgB,GAAG,EAAED,MAAM,CAACV,EAAE;MAAGK,KAAK,EAAEK,MAAM,CAACV;wBAAOU,MAAM,CAACE,IAAI,wBAb5FC,UAAA;2EAQiBV,KAAA,CAAAC,cAAc,E,KAS3BP,mBAAA,mCAAsC,EACtCC,mBAAA,CAkBM,c,0BAjBJA,mBAAA,CAA4F;IAArFJ,KAAK,EAAC;EAAyC,GAAC,+BAA6B,sBACpFI,mBAAA,CAeM,OAfNgB,UAeM,G,gBAdJhB,mBAAA,CAMS;IA3BjB,uBAAAG,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAsBmBC,KAAA,CAAAY,UAAU,GAAAb,MAAA;IACnBR,KAAK,EAAC;gCAENI,mBAAA,CAAwC;IAAhCO,KAAK,EAAC,EAAE;IAACC,QAAQ,EAAR;KAAS,OAAK,uB,kBAC/BX,mBAAA,CAA8FY,SAAA,QA1BxGC,WAAA,CA0BmCL,KAAA,CAAAa,gBAAgB,EAA1BC,MAAM;yBAArBtB,mBAAA,CAA8F;MAAlDgB,GAAG,EAAEM,MAAM;MAAGZ,KAAK,EAAEY;wBAAWA,MAAM,wBA1B5FC,UAAA;2EAsBmBf,KAAA,CAAAY,UAAU,E,mBAMrBjB,mBAAA,CAMS;IAlCjB,uBAAAG,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA6BmBC,KAAA,CAAAgB,QAAQ,GAAAjB,MAAA;IACjBR,KAAK,EAAC;gCAENI,mBAAA,CAAwC;IAAhCO,KAAK,EAAC,EAAE;IAACC,QAAQ,EAAR;KAAS,OAAK,uB,kBAC/BX,mBAAA,CAA8FY,SAAA,QAjCxGC,WAAA,CAiCmCL,KAAA,CAAAa,gBAAgB,EAA1BC,MAAM;yBAArBtB,mBAAA,CAA8F;MAAlDgB,GAAG,EAAEM,MAAM;MAAGZ,KAAK,EAAEY;wBAAWA,MAAM,wBAjC5FG,UAAA;2EA6BmBjB,KAAA,CAAAgB,QAAQ,E,OASvBtB,mBAAA,kDAAqD,EACrDC,mBAAA,CAKM,OALNuB,UAKM,I,kBAJJ1B,mBAAA,CAGMY,SAAA,QA3CZC,WAAA,CAwC4BL,KAAA,CAAAa,gBAAgB,EAA1BC,MAAM;yBAAlBtB,mBAAA,CAGM;MAHmCgB,GAAG,EAAEM,MAAM;MAAEvB,KAAK,EAAC;QAC1DI,mBAAA,CAAqE,OAArEwB,UAAqE,EAAAC,gBAAA,CAAfN,MAAM,kB,4BAC5DnB,mBAAA,CAA6G;MAAxGJ,KAAK,EAAC;IAAyE,GAAC,oBAAkB,qB;oCAI3GG,mBAAA,sBAAyB,EACzBC,mBAAA,CAMS;IALN0B,OAAK,EAAAvB,MAAA,QAAAA,MAAA,UAAAwB,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;IACpBnB,QAAQ,GAAGH,KAAA,CAAAC,cAAc,KAAKD,KAAA,CAAAY,UAAU,KAAKZ,KAAA,CAAAgB,QAAQ,IAAIhB,KAAA,CAAAY,UAAU,GAAGZ,KAAA,CAAAgB,QAAQ;IAC/EzB,KAAK,EAAC;KACP,oBAED,iBArDJkC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}