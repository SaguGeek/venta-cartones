{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex justify-between items-center mb-4\"\n};\nconst _hoisted_2 = [\"disabled\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"flex items-center\"\n};\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"bg-white p-4 rounded-lg shadow-md mb-6\"\n};\nconst _hoisted_6 = {\n  class: \"grid grid-cols-1 sm:grid-cols-3 gap-4\"\n};\nconst _hoisted_7 = {\n  class: \"text-center\"\n};\nconst _hoisted_8 = {\n  class: \"text-2xl font-bold text-blue-600\"\n};\nconst _hoisted_9 = {\n  class: \"text-center\"\n};\nconst _hoisted_10 = {\n  class: \"text-2xl font-bold text-green-600\"\n};\nconst _hoisted_11 = {\n  class: \"text-center\"\n};\nconst _hoisted_12 = {\n  class: \"text-2xl font-bold text-purple-600\"\n};\nconst _hoisted_13 = {\n  key: 1,\n  class: \"text-center text-gray-600\"\n};\nconst _hoisted_14 = {\n  key: 2\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"text-gray-600\"\n};\nconst _hoisted_16 = {\n  class: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = [\"src\", \"alt\", \"onError\"];\nconst _hoisted_19 = {\n  class: \"text-gray-800 font-medium\"\n};\nconst _hoisted_20 = {\n  class: \"text-gray-600\"\n};\nconst _hoisted_21 = {\n  key: 1,\n  class: \"mt-4 flex justify-center items-center space-x-4\"\n};\nconst _hoisted_22 = [\"disabled\"];\nconst _hoisted_23 = {\n  class: \"text-gray-700\"\n};\nconst _hoisted_24 = [\"disabled\"];\nconst _hoisted_25 = {\n  key: 3,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n};\nconst _hoisted_26 = {\n  class: \"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full\"\n};\nconst _hoisted_27 = [\"src\", \"alt\"];\nconst _hoisted_28 = {\n  class: \"text-gray-800 font-medium\"\n};\nconst _hoisted_29 = {\n  class: \"text-gray-600\"\n};\nconst _hoisted_30 = {\n  class: \"mt-4 flex justify-end space-x-4\"\n};\nconst _hoisted_31 = {\n  key: 4,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\n};\nconst _hoisted_32 = {\n  class: \"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full\"\n};\nconst _hoisted_33 = {\n  class: \"text-gray-600\"\n};\nconst _hoisted_34 = {\n  class: \"mt-4 flex justify-end space-x-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_cache[9] || (_cache[9] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-semibold text-gray-800\"\n  }, \"Lista de Cartones\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.loadData && $options.loadData(...args)),\n    class: \"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition flex items-center\",\n    disabled: $data.loading\n  }, [$data.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _cache[8] || (_cache[8] = [_createElementVNode(\"svg\", {\n    class: \"animate-spin h-5 w-5 mr-2 text-white\",\n    viewBox: \"0 0 24 24\"\n  }, [_createElementVNode(\"circle\", {\n    class: \"opacity-25\",\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\",\n    stroke: \"currentColor\",\n    \"stroke-width\": \"4\"\n  }), _createElementVNode(\"path\", {\n    class: \"opacity-75\",\n    fill: \"currentColor\",\n    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n  })], -1 /* HOISTED */), _createTextVNode(\" Cargando... \")]))) : (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \"Refrescar\"))], 8 /* PROPS */, _hoisted_2)]), _createCommentVNode(\" Estadísticas \"), !$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", {\n    class: \"text-xl font-medium text-gray-700 mb-2\"\n  }, \"Estadísticas\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_cache[10] || (_cache[10] = _createElementVNode(\"p\", {\n    class: \"text-gray-600\"\n  }, \"Cartones Disponibles\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_8, _toDisplayString($data.availableCartons), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_9, [_cache[11] || (_cache[11] = _createElementVNode(\"p\", {\n    class: \"text-gray-600\"\n  }, \"Cartones Vendidos\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($data.soldCartons), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_cache[12] || (_cache[12] = _createElementVNode(\"p\", {\n    class: \"text-gray-600\"\n  }, \"Vendedores\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_12, _toDisplayString($data.sellerCount), 1 /* TEXT */)])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Lista de Cartones \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \"Cargando cartones...\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [$data.cartones.length === 0 ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, \"No hay cartones disponibles.\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_16, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.paginatedCartons, carton => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: carton.id,\n      class: \"carton-item bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition cursor-pointer\",\n      onClick: $event => $options.openModal(carton)\n    }, [_createElementVNode(\"img\", {\n      src: carton.imageUrl,\n      alt: 'Cartón ' + carton.serial,\n      class: \"carton-image w-full h-48 object-cover rounded-md mb-2\",\n      onError: $event => $options.handleImageError(carton)\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_18), _createElementVNode(\"p\", _hoisted_19, [_cache[14] || (_cache[14] = _createElementVNode(\"strong\", null, \"Serial:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(carton.serial), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_20, [_cache[15] || (_cache[15] = _createElementVNode(\"strong\", null, \"Estado:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(carton.estado), 1 /* TEXT */)])], 8 /* PROPS */, _hoisted_17);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" Controles de Paginación \"), $options.totalPages > 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.previousPage && $options.previousPage(...args)),\n    disabled: $data.currentPage === 1,\n    class: _normalizeClass([\"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400 transition\", {\n      'cursor-not-allowed opacity-50': $data.currentPage === 1\n    }])\n  }, \" Anterior \", 10 /* CLASS, PROPS */, _hoisted_22), _createElementVNode(\"span\", _hoisted_23, \"Página \" + _toDisplayString($data.currentPage) + \" de \" + _toDisplayString($options.totalPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.nextPage && $options.nextPage(...args)),\n    disabled: $data.currentPage === $options.totalPages,\n    class: _normalizeClass([\"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400 transition\", {\n      'cursor-not-allowed opacity-50': $data.currentPage === $options.totalPages\n    }])\n  }, \" Siguiente \", 10 /* CLASS, PROPS */, _hoisted_24)])) : _createCommentVNode(\"v-if\", true)])), _createCommentVNode(\" Modal de Detalles \"), $data.selectedCarton ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createElementVNode(\"div\", _hoisted_26, [_cache[18] || (_cache[18] = _createElementVNode(\"h3\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"Detalles del Cartón\", -1 /* HOISTED */)), _createElementVNode(\"img\", {\n    src: $data.selectedCarton.imageUrl,\n    alt: 'Cartón ' + $data.selectedCarton.serial,\n    class: \"w-full h-auto rounded-md mb-4\",\n    onError: _cache[3] || (_cache[3] = $event => $options.handleImageError($data.selectedCarton))\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_27), _createElementVNode(\"p\", _hoisted_28, [_cache[16] || (_cache[16] = _createElementVNode(\"strong\", null, \"Serial:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.selectedCarton.serial), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_29, [_cache[17] || (_cache[17] = _createElementVNode(\"strong\", null, \"Estado:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.selectedCarton.estado), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_30, [$data.selectedCarton.estado === 'asignado' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.confirmMakeAvailable && $options.confirmMakeAvailable(...args)),\n    class: \"bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition\"\n  }, \" Devolver a Disponible \")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.closeModal && $options.closeModal(...args)),\n    class: \"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition\"\n  }, \" Cerrar \")])])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Modal de Confirmación \"), $data.showConfirm ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [_createElementVNode(\"div\", _hoisted_32, [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"Confirmar Acción\", -1 /* HOISTED */)), _createElementVNode(\"p\", _hoisted_33, \"¿Estás seguro de que deseas devolver el cartón con serial \" + _toDisplayString($data.selectedCarton.serial) + \" a disponible? Esto permitirá asignarlo a otro vendedor.\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.cancelMakeAvailable && $options.cancelMakeAvailable(...args)),\n    class: \"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition\"\n  }, \" Cancelar \"), _createElementVNode(\"button\", {\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.makeAvailable && $options.makeAvailable(...args)),\n    class: \"bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition\"\n  }, \" Confirmar \")])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_createElementVNode","_hoisted_1","onClick","_cache","args","$options","loadData","disabled","$data","loading","_hoisted_3","viewBox","cx","cy","r","stroke","fill","d","_createTextVNode","_hoisted_4","_hoisted_2","_createCommentVNode","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","availableCartons","_hoisted_9","_hoisted_10","soldCartons","_hoisted_11","_hoisted_12","sellerCount","_hoisted_13","_hoisted_14","cartones","length","_hoisted_15","_hoisted_16","_Fragment","_renderList","paginatedCartons","carton","id","$event","openModal","src","imageUrl","alt","serial","onError","handleImageError","_hoisted_18","_hoisted_19","_hoisted_20","estado","_hoisted_17","totalPages","_hoisted_21","previousPage","currentPage","_normalizeClass","_hoisted_22","_hoisted_23","nextPage","_hoisted_24","selectedCarton","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","confirmMakeAvailable","closeModal","showConfirm","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","cancelMakeAvailable","makeAvailable"],"sources":["D:\\Lotweb\\venta-cartones\\src\\components\\CartonList.vue"],"sourcesContent":["```vue\r\n<template>\r\n  <div>\r\n    <div class=\"flex justify-between items-center mb-4\">\r\n      <h2 class=\"text-xl font-semibold text-gray-800\">Lista de Cartones</h2>\r\n      <button\r\n        @click=\"loadData\"\r\n        class=\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition flex items-center\"\r\n        :disabled=\"loading\"\r\n      >\r\n        <span v-if=\"loading\" class=\"flex items-center\">\r\n          <svg class=\"animate-spin h-5 w-5 mr-2 text-white\" viewBox=\"0 0 24 24\">\r\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n          </svg>\r\n          Cargando...\r\n        </span>\r\n        <span v-else>Refrescar</span>\r\n      </button>\r\n    </div>\r\n    <!-- Estadísticas -->\r\n    <div v-if=\"!loading\" class=\"bg-white p-4 rounded-lg shadow-md mb-6\">\r\n      <h3 class=\"text-xl font-medium text-gray-700 mb-2\">Estadísticas</h3>\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n        <div class=\"text-center\">\r\n          <p class=\"text-gray-600\">Cartones Disponibles</p>\r\n          <p class=\"text-2xl font-bold text-blue-600\">{{ availableCartons }}</p>\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <p class=\"text-gray-600\">Cartones Vendidos</p>\r\n          <p class=\"text-2xl font-bold text-green-600\">{{ soldCartons }}</p>\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <p class=\"text-gray-600\">Vendedores</p>\r\n          <p class=\"text-2xl font-bold text-purple-600\">{{ sellerCount }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Lista de Cartones -->\r\n    <div v-if=\"loading\" class=\"text-center text-gray-600\">Cargando cartones...</div>\r\n    <div v-else>\r\n      <p v-if=\"cartones.length === 0\" class=\"text-gray-600\">No hay cartones disponibles.</p>\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n        <div\r\n          v-for=\"carton in paginatedCartons\"\r\n          :key=\"carton.id\"\r\n          class=\"carton-item bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition cursor-pointer\"\r\n          @click=\"openModal(carton)\"\r\n        >\r\n          <img\r\n            :src=\"carton.imageUrl\"\r\n            :alt=\"'Cartón ' + carton.serial\"\r\n            class=\"carton-image w-full h-48 object-cover rounded-md mb-2\"\r\n            @error=\"handleImageError(carton)\"\r\n          />\r\n          <p class=\"text-gray-800 font-medium\"><strong>Serial:</strong> {{ carton.serial }}</p>\r\n          <p class=\"text-gray-600\"><strong>Estado:</strong> {{ carton.estado }}</p>\r\n        </div>\r\n      </div>\r\n      <!-- Controles de Paginación -->\r\n      <div v-if=\"totalPages > 1\" class=\"mt-4 flex justify-center items-center space-x-4\">\r\n        <button\r\n          @click=\"previousPage\"\r\n          :disabled=\"currentPage === 1\"\r\n          class=\"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400 transition\"\r\n          :class=\"{ 'cursor-not-allowed opacity-50': currentPage === 1 }\"\r\n        >\r\n          Anterior\r\n        </button>\r\n        <span class=\"text-gray-700\">Página {{ currentPage }} de {{ totalPages }}</span>\r\n        <button\r\n          @click=\"nextPage\"\r\n          :disabled=\"currentPage === totalPages\"\r\n          class=\"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400 transition\"\r\n          :class=\"{ 'cursor-not-allowed opacity-50': currentPage === totalPages }\"\r\n        >\r\n          Siguiente\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <!-- Modal de Detalles -->\r\n    <div v-if=\"selectedCarton\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div class=\"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full\">\r\n        <h3 class=\"text-xl font-semibold text-gray-800 mb-4\">Detalles del Cartón</h3>\r\n        <img\r\n          :src=\"selectedCarton.imageUrl\"\r\n          :alt=\"'Cartón ' + selectedCarton.serial\"\r\n          class=\"w-full h-auto rounded-md mb-4\"\r\n          @error=\"handleImageError(selectedCarton)\"\r\n        />\r\n        <p class=\"text-gray-800 font-medium\"><strong>Serial:</strong> {{ selectedCarton.serial }}</p>\r\n        <p class=\"text-gray-600\"><strong>Estado:</strong> {{ selectedCarton.estado }}</p>\r\n        <div class=\"mt-4 flex justify-end space-x-4\">\r\n          <button\r\n            v-if=\"selectedCarton.estado === 'asignado'\"\r\n            @click=\"confirmMakeAvailable\"\r\n            class=\"bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition\"\r\n          >\r\n            Devolver a Disponible\r\n          </button>\r\n          <button\r\n            @click=\"closeModal\"\r\n            class=\"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition\"\r\n          >\r\n            Cerrar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- Modal de Confirmación -->\r\n    <div v-if=\"showConfirm\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div class=\"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full\">\r\n        <h3 class=\"text-xl font-semibold text-gray-800 mb-4\">Confirmar Acción</h3>\r\n        <p class=\"text-gray-600\">¿Estás seguro de que deseas devolver el cartón con serial {{ selectedCarton.serial }} a disponible? Esto permitirá asignarlo a otro vendedor.</p>\r\n        <div class=\"mt-4 flex justify-end space-x-4\">\r\n          <button\r\n            @click=\"cancelMakeAvailable\"\r\n            class=\"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition\"\r\n          >\r\n            Cancelar\r\n          </button>\r\n          <button\r\n            @click=\"makeAvailable\"\r\n            class=\"bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 transition\"\r\n          >\r\n            Confirmar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { db } from '../firebase';\r\nimport { collection, getDocs, doc, updateDoc } from 'firebase/firestore';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cartones: [],\r\n      selectedCarton: null,\r\n      availableCartons: 0,\r\n      soldCartons: 0,\r\n      sellerCount: 0,\r\n      loading: false,\r\n      showConfirm: false,\r\n      currentPage: 1,\r\n      itemsPerPage: 8 // Cantidad de cartones por página\r\n    };\r\n  },\r\n  computed: {\r\n    totalPages() {\r\n      return Math.ceil(this.cartones.length / this.itemsPerPage);\r\n    },\r\n    paginatedCartons() {\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n      return this.cartones.slice(start, end);\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadData();\r\n  },\r\n  methods: {\r\n    async loadData() {\r\n      this.loading = true;\r\n      try {\r\n        await this.loadCartones();\r\n        await this.loadSellers();\r\n      } catch (error) {\r\n        console.error('Error al cargar datos:', error);\r\n        alert('Error al cargar datos: ' + error.message);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async loadCartones() {\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, 'cartones'));\r\n        this.cartones = querySnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data()\r\n        }));\r\n        // Ordenar los cartones por serial (LM seguido de números)\r\n        this.cartones.sort((a, b) => {\r\n          const serialA = parseInt(a.serial.replace('LM', ''), 10);\r\n          const serialB = parseInt(b.serial.replace('LM', ''), 10);\r\n          return serialA - serialB;\r\n        });\r\n        this.availableCartons = this.cartones.filter(c => c.estado === 'disponible').length;\r\n        this.soldCartons = this.cartones.filter(c => c.estado === 'vendido').length;\r\n        console.log('Cartones cargados:', this.cartones);\r\n      } catch (error) {\r\n        console.error('Error al cargar los cartones:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    async loadSellers() {\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, 'vendedores'));\r\n        this.sellerCount = querySnapshot.docs.length;\r\n      } catch (error) {\r\n        console.error('Error al cargar los vendedores:', error);\r\n        throw error;\r\n      }\r\n    },\r\n    openModal(carton) {\r\n      this.selectedCarton = carton;\r\n    },\r\n    closeModal() {\r\n      this.selectedCarton = null;\r\n      this.showConfirm = false;\r\n    },\r\n    handleImageError(carton) {\r\n      console.error(`Error al cargar la imagen del cartón ${carton.serial}:`, carton.imageUrl);\r\n      carton.imageUrl = null;\r\n    },\r\n    confirmMakeAvailable() {\r\n      this.showConfirm = true;\r\n    },\r\n    cancelMakeAvailable() {\r\n      this.showConfirm = false;\r\n    },\r\n    async makeAvailable() {\r\n      if (!this.selectedCarton) return;\r\n\r\n      try {\r\n        console.log('Devolviendo cartón a disponible:', this.selectedCarton.id);\r\n        const cartonRef = doc(db, 'cartones', this.selectedCarton.id);\r\n        await updateDoc(cartonRef, {\r\n          vendedorId: null,\r\n          estado: 'disponible'\r\n        });\r\n        console.log('Cartón devuelto a disponible exitosamente');\r\n        alert('Cartón devuelto a disponible exitosamente');\r\n        this.showConfirm = false;\r\n        this.selectedCarton = null;\r\n        await this.loadData();\r\n      } catch (error) {\r\n        console.error('Error al devolver cartón a disponible:', error);\r\n        alert('Error al devolver cartón a disponible: ' + error.message);\r\n      }\r\n    },\r\n    previousPage() {\r\n      if (this.currentPage > 1) this.currentPage--;\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) this.currentPage++;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Tailwind maneja los estilos */\r\n</style>\r\n```"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}