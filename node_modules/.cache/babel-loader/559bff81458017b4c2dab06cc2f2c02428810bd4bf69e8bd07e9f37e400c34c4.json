{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { db } from '../firebase';\nimport { collection, getDocs } from 'firebase/firestore';\nexport default {\n  data() {\n    return {\n      sellers: [],\n      cartones: [],\n      selectedSeller: null\n    };\n  },\n  async mounted() {\n    await this.loadCartones();\n    await this.loadSellers();\n  },\n  computed: {\n    sellerCartons() {\n      if (!this.selectedSeller) return [];\n      return this.cartones.filter(c => c.vendedorId === this.selectedSeller.vendedorId);\n    }\n  },\n  methods: {\n    async loadCartones() {\n      try {\n        const querySnapshot = await getDocs(collection(db, 'cartones'));\n        this.cartones = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        console.log('Cartones cargados:', this.cartones); // Depuración\n      } catch (error) {\n        console.error('Error al cargar los cartones:', error);\n        alert('Error al cargar los cartones: ' + error.message);\n      }\n    },\n    async loadSellers() {\n      try {\n        const querySnapshot = await getDocs(collection(db, 'vendedores'));\n        this.sellers = querySnapshot.docs.map(doc => {\n          const sellerData = doc.data();\n          const assignedCartons = this.cartones.filter(c => c.vendedorId === sellerData.vendedorId).length;\n          const soldCartons = this.cartones.filter(c => c.vendedorId === sellerData.vendedorId && c.estado === 'vendido').length;\n          const availableCartons = this.cartones.filter(c => c.vendedorId === sellerData.vendedorId && c.estado === 'disponible').length;\n          return {\n            ...sellerData,\n            assignedCartons: assignedCartons || 0,\n            soldCartons: soldCartons || 0,\n            availableCartons: availableCartons || 0\n          };\n        });\n        console.log('Vendedores cargados:', this.sellers); // Depuración\n      } catch (error) {\n        console.error('Error al cargar los vendedores:', error);\n        alert('Error al cargar los vendedores: ' + error.message);\n      }\n    },\n    openModal(seller) {\n      this.selectedSeller = seller;\n    },\n    closeModal() {\n      this.selectedSeller = null;\n    }\n  }\n};","map":{"version":3,"names":["db","collection","getDocs","data","sellers","cartones","selectedSeller","mounted","loadCartones","loadSellers","computed","sellerCartons","filter","c","vendedorId","methods","querySnapshot","docs","map","doc","id","console","log","error","alert","message","sellerData","assignedCartons","length","soldCartons","estado","availableCartons","openModal","seller","closeModal"],"sources":["D:\\Lotweb\\venta-cartones\\src\\components\\SellerList.vue"],"sourcesContent":["```vue\r\n   <template>\r\n     <div>\r\n       <h2 class=\"text-2xl font-semibold text-gray-800 mb-4\">Lista de Vendedores</h2>\r\n       <p v-if=\"sellers.length === 0\" class=\"text-gray-600\">No hay vendedores registrados.</p>\r\n       <div class=\"grid grid-cols-1 gap-4\">\r\n         <div\r\n           v-for=\"seller in sellers\"\r\n           :key=\"seller.vendedorId\"\r\n           class=\"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition cursor-pointer\"\r\n           @click=\"openModal(seller)\"\r\n         >\r\n           <h3 class=\"text-lg font-semibold text-gray-700\">{{ seller.nombre || 'Nombre no disponible' }}</h3>\r\n         </div>\r\n       </div>\r\n       <!-- Modal -->\r\n       <div v-if=\"selectedSeller\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n         <div class=\"bg-white p-6 rounded-lg shadow-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\r\n           <h3 class=\"text-xl font-semibold text-gray-800 mb-4\">{{ selectedSeller.nombre || 'Nombre no disponible' }}</h3>\r\n           <div class=\"grid grid-cols-2 gap-2 mb-4\">\r\n             <p class=\"text-gray-600\"><strong>Cartones Asignados:</strong> {{ selectedSeller.assignedCartons }}</p>\r\n             <p class=\"text-gray-600\"><strong>Cartones Vendidos:</strong> {{ selectedSeller.soldCartons }}</p>\r\n             <p class=\"text-gray-600\"><strong>Cartones Disponibles:</strong> {{ selectedSeller.availableCartons }}</p>\r\n             <p class=\"text-gray-600\"><strong>Saldo Generado:</strong> ${{ selectedSeller.soldCartons }}</p>\r\n           </div>\r\n           <h4 class=\"text-lg font-medium text-gray-700 mb-2\">Cartones Asignados</h4>\r\n           <div v-if=\"sellerCartons.length === 0\" class=\"text-gray-600\">No hay cartones asignados.</div>\r\n           <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n             <div\r\n               v-for=\"carton in sellerCartons\"\r\n               :key=\"carton.id\"\r\n               class=\"bg-gray-50 p-2 rounded-md\"\r\n             >\r\n               <img :src=\"carton.imageUrl\" :alt=\"'Cartón ' + carton.serial\" class=\"w-full h-32 object-cover rounded-md mb-2\" />\r\n               <p class=\"text-gray-600 text-sm\"><strong>Serial:</strong> {{ carton.serial }}</p>\r\n               <p class=\"text-gray-600 text-sm\"><strong>Estado:</strong> {{ carton.estado }}</p>\r\n             </div>\r\n           </div>\r\n           <button\r\n             @click=\"closeModal\"\r\n             class=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition\"\r\n           >\r\n             Cerrar\r\n           </button>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </template>\r\n\r\n   <script>\r\n   import { db } from '../firebase';\r\n   import { collection, getDocs } from 'firebase/firestore';\r\n\r\n   export default {\r\n     data() {\r\n       return {\r\n         sellers: [],\r\n         cartones: [],\r\n         selectedSeller: null\r\n       };\r\n     },\r\n     async mounted() {\r\n       await this.loadCartones();\r\n       await this.loadSellers();\r\n     },\r\n     computed: {\r\n       sellerCartons() {\r\n         if (!this.selectedSeller) return [];\r\n         return this.cartones.filter(c => c.vendedorId === this.selectedSeller.vendedorId);\r\n       }\r\n     },\r\n     methods: {\r\n       async loadCartones() {\r\n         try {\r\n           const querySnapshot = await getDocs(collection(db, 'cartones'));\r\n           this.cartones = querySnapshot.docs.map(doc => ({\r\n             id: doc.id,\r\n             ...doc.data()\r\n           }));\r\n           console.log('Cartones cargados:', this.cartones); // Depuración\r\n         } catch (error) {\r\n           console.error('Error al cargar los cartones:', error);\r\n           alert('Error al cargar los cartones: ' + error.message);\r\n         }\r\n       },\r\n       async loadSellers() {\r\n         try {\r\n           const querySnapshot = await getDocs(collection(db, 'vendedores'));\r\n           this.sellers = querySnapshot.docs.map(doc => {\r\n             const sellerData = doc.data();\r\n             const assignedCartons = this.cartones.filter(c => c.vendedorId === sellerData.vendedorId).length;\r\n             const soldCartons = this.cartones.filter(\r\n               c => c.vendedorId === sellerData.vendedorId && c.estado === 'vendido'\r\n             ).length;\r\n             const availableCartons = this.cartones.filter(\r\n               c => c.vendedorId === sellerData.vendedorId && c.estado === 'disponible'\r\n             ).length;\r\n             return {\r\n               ...sellerData,\r\n               assignedCartons: assignedCartons || 0,\r\n               soldCartons: soldCartons || 0,\r\n               availableCartons: availableCartons || 0\r\n             };\r\n           });\r\n           console.log('Vendedores cargados:', this.sellers); // Depuración\r\n         } catch (error) {\r\n           console.error('Error al cargar los vendedores:', error);\r\n           alert('Error al cargar los vendedores: ' + error.message);\r\n         }\r\n       },\r\n       openModal(seller) {\r\n         this.selectedSeller = seller;\r\n       },\r\n       closeModal() {\r\n         this.selectedSeller = null;\r\n       }\r\n     }\r\n   };\r\n   </script>\r\n\r\n   <style scoped>\r\n   /* Tailwind maneja los estilos */\r\n   </style>\r\n   ```"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}