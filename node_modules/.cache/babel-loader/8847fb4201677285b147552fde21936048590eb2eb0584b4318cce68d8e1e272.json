{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\",\n  class: \"min-h-screen bg-gray-100\"\n};\nconst _hoisted_2 = {\n  class: \"container mx-auto p-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UploadCarton = _resolveComponent(\"UploadCarton\");\n  const _component_AssignCartons = _resolveComponent(\"AssignCartons\");\n  const _component_CartonList = _resolveComponent(\"CartonList\");\n  const _component_SellerList = _resolveComponent(\"SellerList\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"header\", {\n    class: \"bg-blue-600 text-white p-4 shadow-md\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-3xl font-bold text-center\"\n  }, \"Venta de Cartones\")], -1 /* HOISTED */)), _createElementVNode(\"main\", _hoisted_2, [_createVNode(_component_UploadCarton, {\n    onCheckDuplicates: $options.checkDuplicates,\n    onImagesUploaded: $options.handleImagesUploaded\n  }, null, 8 /* PROPS */, [\"onCheckDuplicates\", \"onImagesUploaded\"]), _createVNode(_component_AssignCartons), _createVNode(_component_CartonList), _createVNode(_component_SellerList)])]);\n}","map":{"version":3,"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_UploadCarton","onCheckDuplicates","$options","checkDuplicates","onImagesUploaded","handleImagesUploaded","_component_AssignCartons","_component_CartonList","_component_SellerList"],"sources":["D:\\Lotweb\\venta-cartones\\src\\App.vue"],"sourcesContent":["```vue\n   <template>\n     <div id=\"app\" class=\"min-h-screen bg-gray-100\">\n       <header class=\"bg-blue-600 text-white p-4 shadow-md\">\n         <h1 class=\"text-3xl font-bold text-center\">Venta de Cartones</h1>\n       </header>\n       <main class=\"container mx-auto p-4\">\n         <UploadCarton @check-duplicates=\"checkDuplicates\" @images-uploaded=\"handleImagesUploaded\" />\n         <AssignCartons />\n         <CartonList />\n         <SellerList />\n       </main>\n     </div>\n   </template>\n\n   <script>\n   import UploadCarton from './components/UploadCarton.vue';\n   import AssignCartons from './components/AssignCartons.vue';\n   import CartonList from './components/CartonList.vue';\n   import SellerList from './components/SellerList.vue';\n   import { db } from './firebase';\n   import { collection, query, where, getDocs, addDoc } from 'firebase/firestore';\n\n   export default {\n     components: {\n       UploadCarton,\n       AssignCartons,\n       CartonList,\n       SellerList\n     },\n     methods: {\n       async checkDuplicates({ serials, files }, callback) {\n         try {\n           const cartonesRef = collection(db, 'cartones');\n           const q = query(cartonesRef, where('serial', 'in', serials));\n           const querySnapshot = await getDocs(q);\n           const existingSerials = querySnapshot.docs.map(doc => doc.data().serial);\n           const nonDuplicates = files.filter(file => !existingSerials.includes(file.name.split('.')[0]));\n           callback(nonDuplicates);\n         } catch (error) {\n           console.error('Error al verificar duplicados:', error);\n           alert('Error al verificar duplicados: ' + error.message);\n           callback([]);\n         }\n       },\n       async handleImagesUploaded(images) {\n         try {\n           for (const image of images) {\n             const docRef = await addDoc(collection(db, 'cartones'), {\n               serial: image.serial,\n               imageUrl: image.imageUrl,\n               estado: 'disponible',\n               createdAt: new Date(),\n               vendedorId: null\n             });\n             console.log(`Cart√≥n ${image.serial} guardado con ID:`, docRef.id);\n           }\n           alert('Todos los cartones se guardaron exitosamente en Firestore');\n         } catch (error) {\n           console.error('Error al guardar los cartones:', error);\n           alert('Error al guardar en Firestore: ' + error.message);\n         }\n       }\n     }\n   };\n   </script>\n\n   <style scoped>\n   /* Tailwind maneja los estilos */\n   </style>\n   ```"],"mappings":";;EAEUA,EAAE,EAAC,KAAK;EAACC,KAAK,EAAC;;;EAIZA,KAAK,EAAC;AAAuB;;;;;;uBAJrCC,mBAAA,CAUM,OAVNC,UAUM,G,0BATJC,mBAAA,CAES;IAFDH,KAAK,EAAC;EAAsC,IAClDG,mBAAA,CAAiE;IAA7DH,KAAK,EAAC;EAAgC,GAAC,mBAAiB,E,sBAE9DG,mBAAA,CAKO,QALPC,UAKO,GAJLC,YAAA,CAA4FC,uBAAA;IAA7EC,iBAAgB,EAAEC,QAAA,CAAAC,eAAe;IAAGC,gBAAe,EAAEF,QAAA,CAAAG;sEACpEN,YAAA,CAAiBO,wBAAA,GACjBP,YAAA,CAAcQ,qBAAA,GACdR,YAAA,CAAcS,qBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}