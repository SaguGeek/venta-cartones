{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-gray-100\"\n};\nconst _hoisted_2 = {\n  class: \"bg-indigo-900 text-white shadow-lg\"\n};\nconst _hoisted_3 = {\n  class: \"container mx-auto px-4 py-4 flex justify-between items-center\"\n};\nconst _hoisted_4 = {\n  class: \"container mx-auto px-4 py-8\"\n};\nconst _hoisted_5 = {\n  class: \"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6\"\n};\nconst _hoisted_6 = {\n  class: \"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\"\n};\nconst _hoisted_7 = {\n  class: \"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\"\n};\nconst _hoisted_8 = {\n  class: \"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\"\n};\nconst _hoisted_9 = {\n  class: \"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UploadCarton = _resolveComponent(\"UploadCarton\");\n  const _component_AssignCartons = _resolveComponent(\"AssignCartons\");\n  const _component_CartonList = _resolveComponent(\"CartonList\");\n  const _component_SellerList = _resolveComponent(\"SellerList\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Barra de Navegación \"), _createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"flex items-center space-x-3\"\n  }, [_createElementVNode(\"span\", {\n    class: \"text-2xl font-bold text-purple-300 animate-pulse\"\n  }, \"VC\"), _createElementVNode(\"h1\", {\n    class: \"text-2xl font-semibold\"\n  }, \"Dashboard Admin\")], -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.logout && $options.logout(...args)),\n    class: \"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition duration-300\"\n  }, \" Cerrar Sesión \")])]), _createCommentVNode(\" Contenido Principal \"), _createElementVNode(\"main\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" Sección de Subir Cartones \"), _createElementVNode(\"div\", _hoisted_6, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"Subir Cartones\", -1 /* HOISTED */)), _createVNode(_component_UploadCarton, {\n    onCheckDuplicates: $options.checkDuplicates,\n    onImagesUploaded: $options.handleImagesUploaded\n  }, null, 8 /* PROPS */, [\"onCheckDuplicates\", \"onImagesUploaded\"])]), _createCommentVNode(\" Sección de Asignar Cartones \"), _createElementVNode(\"div\", _hoisted_7, [_cache[3] || (_cache[3] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"Asignar Cartones\", -1 /* HOISTED */)), _createVNode(_component_AssignCartons, {\n    onCartonesAsignados: $options.refreshCartones\n  }, null, 8 /* PROPS */, [\"onCartonesAsignados\"])]), _createCommentVNode(\" Sección de Lista de Cartones \"), _createElementVNode(\"div\", _hoisted_8, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"Lista de Cartones\", -1 /* HOISTED */)), _createVNode(_component_CartonList, {\n    ref: \"cartonList\"\n  }, null, 512 /* NEED_PATCH */)]), _createCommentVNode(\" Sección de Lista de Vendedores \"), _createElementVNode(\"div\", _hoisted_9, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"Lista de Vendedores\", -1 /* HOISTED */)), _createVNode(_component_SellerList)])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","args","$options","logout","_hoisted_4","_hoisted_5","_hoisted_6","_createVNode","_component_UploadCarton","onCheckDuplicates","checkDuplicates","onImagesUploaded","handleImagesUploaded","_hoisted_7","_component_AssignCartons","onCartonesAsignados","refreshCartones","_hoisted_8","_component_CartonList","ref","_hoisted_9","_component_SellerList"],"sources":["D:\\Lotweb\\venta-cartones\\src\\views\\HomePage.vue"],"sourcesContent":["```vue\r\n<template>\r\n  <div class=\"min-h-screen bg-gray-100\">\r\n    <!-- Barra de Navegación -->\r\n    <header class=\"bg-indigo-900 text-white shadow-lg\">\r\n      <div class=\"container mx-auto px-4 py-4 flex justify-between items-center\">\r\n        <div class=\"flex items-center space-x-3\">\r\n          <span class=\"text-2xl font-bold text-purple-300 animate-pulse\">VC</span>\r\n          <h1 class=\"text-2xl font-semibold\">Dashboard Admin</h1>\r\n        </div>\r\n        <button\r\n          @click=\"logout\"\r\n          class=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition duration-300\"\r\n        >\r\n          Cerrar Sesión\r\n        </button>\r\n      </div>\r\n    </header>\r\n\r\n    <!-- Contenido Principal -->\r\n    <main class=\"container mx-auto px-4 py-8\">\r\n      <div class=\"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6\">\r\n        <!-- Sección de Subir Cartones -->\r\n        <div class=\"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\">\r\n          <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">Subir Cartones</h2>\r\n          <UploadCarton @check-duplicates=\"checkDuplicates\" @images-uploaded=\"handleImagesUploaded\" />\r\n        </div>\r\n\r\n        <!-- Sección de Asignar Cartones -->\r\n        <div class=\"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\">\r\n          <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">Asignar Cartones</h2>\r\n          <AssignCartons @cartones-asignados=\"refreshCartones\" />\r\n        </div>\r\n\r\n        <!-- Sección de Lista de Cartones -->\r\n        <div class=\"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\">\r\n          <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">Lista de Cartones</h2>\r\n          <CartonList ref=\"cartonList\" />\r\n        </div>\r\n\r\n        <!-- Sección de Lista de Vendedores -->\r\n        <div class=\"bg-white p-6 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl\">\r\n          <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">Lista de Vendedores</h2>\r\n          <SellerList />\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UploadCarton from '../components/UploadCarton.vue';\r\nimport AssignCartons from '../components/AssignCartons.vue';\r\nimport CartonList from '../components/CartonList.vue';\r\nimport SellerList from '../components/SellerList.vue';\r\nimport { db } from '../firebase';\r\nimport { collection, query, where, getDocs, addDoc } from 'firebase/firestore';\r\nimport { auth } from '../firebase';\r\nimport { signOut } from 'firebase/auth';\r\n\r\nexport default {\r\n  name: 'HomePage',\r\n  components: {\r\n    UploadCarton,\r\n    AssignCartons,\r\n    CartonList,\r\n    SellerList\r\n  },\r\n  methods: {\r\n    async checkDuplicates({ serials, files }, callback) {\r\n      try {\r\n        const cartonesRef = collection(db, 'cartones');\r\n        const q = query(cartonesRef, where('serial', 'in', serials));\r\n        const querySnapshot = await getDocs(q);\r\n        const existingSerials = querySnapshot.docs.map(doc => doc.data().serial);\r\n        const nonDuplicates = files.filter(file => !existingSerials.includes(file.name.split('.')[0]));\r\n        callback(nonDuplicates);\r\n      } catch (error) {\r\n        console.error('Error al verificar duplicados:', error);\r\n        alert('Error al verificar duplicados: ' + error.message);\r\n        callback([]);\r\n      }\r\n    },\r\n    async handleImagesUploaded(images) {\r\n      try {\r\n        let successCount = 0;\r\n        for (const image of images) {\r\n          if (image.serial && image.imageUrl) {\r\n            const docRef = await addDoc(collection(db, 'cartones'), {\r\n              serial: image.serial,\r\n              imageUrl: image.imageUrl,\r\n              estado: 'disponible',\r\n              createdAt: new Date(),\r\n              vendedorId: null\r\n            });\r\n            console.log(`Cartón ${image.serial} guardado con ID:`, docRef.id);\r\n            successCount++;\r\n          } else if (typeof image === 'string') {\r\n            // Caso en que se recibe una URL directamente (compatibilidad con Cloudinary)\r\n            const serial = this.selectedFiles.find(file => file.name.includes(image.split('/').pop().split('.')[0]))?.name.split('.')[0];\r\n            if (serial) {\r\n              const docRef = await addDoc(collection(db, 'cartones'), {\r\n                serial: serial,\r\n                imageUrl: image,\r\n                estado: 'disponible',\r\n                createdAt: new Date(),\r\n                vendedorId: null\r\n              });\r\n              console.log(`Cartón ${serial} guardado con ID:`, docRef.id);\r\n              successCount++;\r\n            }\r\n          }\r\n        }\r\n        alert(`${successCount} de ${images.length} cartones se guardaron exitosamente en Firestore`);\r\n      } catch (error) {\r\n        console.error('Error al guardar los cartones:', error);\r\n        alert(`Error al guardar los cartones: ${error.message}. Se guardaron ${successCount} de ${images.length} cartones.`);\r\n      }\r\n    },\r\n    async refreshCartones() {\r\n      if (this.$refs.cartonList && typeof this.$refs.cartonList.loadCartones === 'function') {\r\n        await this.$refs.cartonList.loadCartones();\r\n      } else {\r\n        console.warn('loadCartones no está disponible en CartonList');\r\n      }\r\n    },\r\n    async logout() {\r\n      try {\r\n        await signOut(auth);\r\n        this.$router.push('/login');\r\n        console.log('Sesión cerrada con éxito');\r\n      } catch (error) {\r\n        console.error('Error al cerrar sesión:', error);\r\n        alert('Error al cerrar sesión: ' + error.message);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Animación de pulso para el logo */\r\n.animate-pulse {\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.1);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n</style>"],"mappings":";;EAEOA,KAAK,EAAC;AAA0B;;EAE3BA,KAAK,EAAC;AAAoC;;EAC3CA,KAAK,EAAC;AAA+D;;EAetEA,KAAK,EAAC;AAA6B;;EAClCA,KAAK,EAAC;AAAqE;;EAEzEA,KAAK,EAAC;AAA+E;;EAMrFA,KAAK,EAAC;AAA+E;;EAMrFA,KAAK,EAAC;AAA+E;;EAMrFA,KAAK,EAAC;AAA+E;;;;;;uBAvChGC,mBAAA,CA6CM,OA7CNC,UA6CM,GA5CJC,mBAAA,yBAA4B,EAC5BC,mBAAA,CAaS,UAbTC,UAaS,GAZPD,mBAAA,CAWM,OAXNE,UAWM,G,0BAVJF,mBAAA,CAGM;IAHDJ,KAAK,EAAC;EAA6B,IACtCI,mBAAA,CAAwE;IAAlEJ,KAAK,EAAC;EAAkD,GAAC,IAAE,GACjEI,mBAAA,CAAuD;IAAnDJ,KAAK,EAAC;EAAwB,GAAC,iBAAe,E,sBAEpDI,mBAAA,CAKS;IAJNG,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,MAAA,IAAAD,QAAA,CAAAC,MAAA,IAAAF,IAAA,CAAM;IACdT,KAAK,EAAC;KACP,iBAED,E,KAIJG,mBAAA,yBAA4B,EAC5BC,mBAAA,CA0BO,QA1BPQ,UA0BO,GAzBLR,mBAAA,CAwBM,OAxBNS,UAwBM,GAvBJV,mBAAA,+BAAkC,EAClCC,mBAAA,CAGM,OAHNU,UAGM,G,0BAFJV,mBAAA,CAAwE;IAApEJ,KAAK,EAAC;EAA0C,GAAC,gBAAc,sBACnEe,YAAA,CAA4FC,uBAAA;IAA7EC,iBAAgB,EAAEP,QAAA,CAAAQ,eAAe;IAAGC,gBAAe,EAAET,QAAA,CAAAU;wEAGtEjB,mBAAA,iCAAoC,EACpCC,mBAAA,CAGM,OAHNiB,UAGM,G,0BAFJjB,mBAAA,CAA0E;IAAtEJ,KAAK,EAAC;EAA0C,GAAC,kBAAgB,sBACrEe,YAAA,CAAuDO,wBAAA;IAAvCC,mBAAkB,EAAEb,QAAA,CAAAc;EAAe,iD,GAGrDrB,mBAAA,kCAAqC,EACrCC,mBAAA,CAGM,OAHNqB,UAGM,G,0BAFJrB,mBAAA,CAA2E;IAAvEJ,KAAK,EAAC;EAA0C,GAAC,mBAAiB,sBACtEe,YAAA,CAA+BW,qBAAA;IAAnBC,GAAG,EAAC;EAAY,+B,GAG9BxB,mBAAA,oCAAuC,EACvCC,mBAAA,CAGM,OAHNwB,UAGM,G,0BAFJxB,mBAAA,CAA6E;IAAzEJ,KAAK,EAAC;EAA0C,GAAC,qBAAmB,sBACxEe,YAAA,CAAcc,qBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}